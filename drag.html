<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Html Drag</title>
</head>
<body>
    <div id="itsDrag" style="position:absolute;width:100px;height:100px;background:#f90"></div>
    


    <script>

    function getScrollOffsets(w) {
        // Use the specified window or the current window if no argument
        w = w || window;
        // This works for all browsers except IE versions 8 and before
        if (w.pageXOffset != null) return {x: w.pageXOffset, y:w.pageYOffset};
        // For IE (or any browser) in Standards mode
        var d = w.document;
        if (document.compatMode == "CSS1Compat")
            return {x:d.documentElement.scrollLeft, y:d.documentElement.scrollTop};

        // For browsers in Quirks mode
        return { x: d.body.scrollLeft, y: d.body.scrollTop };

    }

    function drag(elementToDrag, evt) {

            var scroll = getScrollOffsets();
            var startX = evt.clientX + scroll.x;
            var startY = evt.clientY + scroll.y;

            var origX = elementToDrag.offsetLeft;
            var origY = elementToDrag.offsetTop;

            var deltaX = startX - origX;
            var deltaY = startY - origY;

            if (document.addEventListener) { 

                document.addEventListener("mousemove", moveHandler, true);
                document.addEventListener("mouseup", upHandler, true);
            }
            else if (document.attachEvent) { 
                elementToDrag.attachEvent("onmousemove", moveHandler);
                elementToDrag.attachEvent("onmouseup", upHandler);
                elementToDrag.attachEvent("onlosecapture", upHandler);
            }

            if (event.stopPropagation) event.stopPropagation();
            else event.cancelBubble = true;
            
            if (event.preventDefault) event.preventDefault();
            else event.returnValue = false;
        
        function moveHandler(e) {
            if (!e) e = window.event;

            var scroll = getScrollOffsets();
            elementToDrag.style.left = (e.clientX + scroll.x - deltaX) + "px";
            elementToDrag.style.top = (e.clientY + scroll.y - deltaY) + "px";
            if (e.stopPropagation) e.stopPropagation();
            else e.cancelBubble = true;
        }
        
        function upHandler(e) {
            if (!e) e = window.event;
            
            if (document.removeEventListener) { 
                document.removeEventListener("mouseup", upHandler, true);
                document.removeEventListener("mousemove", moveHandler, true);
            }
            else if (document.detachEvent) {
                elementToDrag.detachEvent("onlosecapture", upHandler);
                elementToDrag.detachEvent("onmouseup", upHandler);
                elementToDrag.detachEvent("onmousemove", moveHandler);
                elementToDrag.releaseCapture();
            }
            if (e.stopPropagation) e.stopPropagation(); // Standard model
            else e.cancelBubble = true;
        }
    }
    
    var elementDrag = document.getElementById('itsDrag');

    elementDrag.addEventListener('mousedown', 
        function(e){ 
            drag(elementDrag, e) 
        }, 
    false);

    </script>
</body>
</html>